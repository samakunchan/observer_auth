on:
  pull_request:
    branches:
      - main

name: ðŸšš [TEST PR] Workflow qui test la PR.
jobs:
  good_branch:
    name: ðŸ“Ÿ Destination de la PR.
    runs-on: windows-latest

    steps:
      - run: echo "ðŸŽ‰ Bravo ðŸŽ‰. Le job se lance sur l'Ã©vÃ¨nement ${{ github.event_name }}."
      - run: echo "Le nom de la branche est ${{ github.ref }} et le nom du repository est ${{ github.repository }}."

      - name: Test de la branche d'origine.
        uses: actions/github-script@v3
        if: github.ref != 'refs/heads/developpement'
        with:
          script: |
            core.setFailed("La branche d'origine doit Ãªtre : 'developpement'. Actuelle la branche c'est ${{ github.ref }}.")

      - name: Test de la branche de destination.
        uses: actions/github-script@v3
        if: github.event.pull_request.base.ref != 'refs/heads/main'
        with:
          script: |
            core.setFailed("La branche de destination doit Ãªtre : 'main'. Actuellement la branche c'est : ${{ github.event.pull_request.base.ref }}.")